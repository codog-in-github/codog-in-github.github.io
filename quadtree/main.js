(()=>{"use strict";const e=document.getElementById("svg");let t=Array(10);for(let e=0;e<10;e++){let r=1<<e;t[e]=Array(r);for(let n=0;n<r;n++)t[e][n]=Array(r)}function r(e,r,n){const a=document.createElementNS("http://www.w3.org/2000/svg","circle"),o=1<<10-e-2;a.setAttribute("cx",o*n*2+o),a.setAttribute("cy",o*r*2+o),a.setAttribute("r",o);const[l,s,d]=t[e][r][n];return a.setAttribute("fill",`rgb(${l}, ${s}, ${d})`),a.setAttribute("data-index",e+"-"+r+"-"+n),a}e.addEventListener("mouseover",(t=>{setTimeout((()=>{const n=t.target.getAttribute("data-index");if(n){const[a,o,l]=n.split("-");a<10&&(e.removeChild(t.target),e.appendChild(r(Number(a)+1,2*o,2*l)),e.appendChild(r(Number(a)+1,2*o+1,2*l)),e.appendChild(r(Number(a)+1,2*o,2*l+1)),e.appendChild(r(Number(a)+1,2*o+1,2*l+1)))}}),100)}));const n=document.getElementById("ipt"),{floor:a}=Math;n.addEventListener("change",(async()=>{try{let l=9,s=1<<l,d=await(o=n,new Promise(((e,t)=>{const r=new FileReader;r.readAsDataURL(o.files[0]),r.onload=()=>{e(r.result)}})));const i=new Image;i.src=d,await(e=>new Promise((t=>{e.onload=()=>t(e)})))(i);const c=((e,t=512,r=512)=>{let n=document.createElement("canvas");n.width=t,n.height=r;let a=n.getContext("2d");return a.drawImage(e,0,0,t,r),a.getImageData(0,0,t,r).data})(i,s,s);for(let e=0;e<s;e++)for(let r=0;r<s;r++){let n=4*e*s+4*r;t[l][e][r]=[c[n],c[n+1],c[n+2]]}for(s>>=1,l--;s;){for(let e=0;e<s;e++)for(let r=0;r<s;r++){const[[n,o,s],[d,i,c],[m,u,g],[h,p,f]]=[t[l+1][2*e][2*r],t[l+1][2*e+1][2*r],t[l+1][2*e][2*r+1],t[l+1][2*e+1][2*r+1]];t[l][e][r]=[a((n+d+m+h)/4),a((o+i+u+p)/4),a((s+c+g+f)/4)]}l--,s>>=1}e.innerHTML="",console.log(t),e.appendChild(r(0,0,0))}catch(e){alert(e.message)}var o}))})();